# ===============================================
# CONFIGURACIÓN GENERAL Y DE SERVIDOR
# ===============================================
spring.application.name=api
# Render ignora este puerto y asigna uno dinámicamente. 8076 es para desarrollo local.
server.port=${PORT:8076}
# Esencial para que las URLs se generen correctamente detrás del proxy de Render
server.forward-headers-strategy=framework

# ===============================================
# BASE DE DATOS (PARA RENDER Y LOCAL)
# ===============================================
# Render inyectará la variable de entorno DATABASE_URL. Si no existe, usará la de localhost.
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3306/jugueteria_db?createDatabaseIfNotExist=true}
spring.datasource.username=${MYSQL_USER:root}
spring.datasource.password=${MYSQL_PASSWORD:alfonso03}

# En producción, 'validate' es más seguro que 'update'.
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false # Desactivar en producción

# ===============================================
# CONFIGURACIÓN DE SUBIDA DE ARCHIVOS
# ===============================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=11MB

# ===============================================
# SECRETOS DE LA APLICACIÓN (Leídos desde Render)
# ===============================================
jwt.secret=${JWT_SECRET}
jwt.expiration.ms=86400000

# ===============================================
# MERCADO PAGO (Leído desde Render)
# ===============================================
mercadopago.access-token=${MERCADOPAGO_ACCESS_TOKEN}
# La URL del webhook se construirá a partir de la URL de Render
app.webhook-url=${RENDER_EXTERNAL_URL}

# ===============================================
# CLOUDINARY (Leído desde Render)
# ===============================================
# La configuración del Bean de Cloudinary leerá esta variable automáticamente
# CLOUDINARY_URL=cloudinary://... (Esta se define en el panel de Render)

# ===============================================
# EMAIL (Leído desde Render)
# ===============================================
spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true